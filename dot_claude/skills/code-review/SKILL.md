---
name: code-review
description: コードレビューを実施するスキル。シンプルさ・拡張性・テストの3つの柱に基づいた包括的なレビュー観点を提供する。「レビューして」「コードを確認して」「PRをチェックして」「このコードの問題点は？」などのリクエストで起動する。
---

# Code Review

コードレビューの3つの柱に基づいてレビューを実施する。

## ワークフロー

1. 現在のブランチの変更差分を取得
2. 変更されたファイルの内容を確認
3. 該当するリファレンスを参照して観点を確認
4. 問題点と改善案を提示

## 差分の取得手順

```bash
# ベースブランチ（main/master/develop等）からの差分ファイル一覧
git diff --name-only main...HEAD

# 差分の詳細を確認
git diff main...HEAD

# 特定ファイルの差分のみ
git diff main...HEAD -- path/to/file
```

ベースブランチが不明な場合は `git log --oneline --graph -10` で分岐点を確認する。

## リファレンス

観点に応じて以下を参照：

- **シンプルさ・可読性**: [simplicity.md](references/simplicity.md) - 認知的負荷、命名、YAGNI
- **拡張性・スケーラビリティ**: [extensibility.md](references/extensibility.md) - SOLID原則、DI、パフォーマンス
- **テスト戦略**: [testing.md](references/testing.md) - 振る舞いテスト、AAA、モック
- **チェックリスト**: [checklist.md](references/checklist.md) - 全観点の一覧

## 出力フォーマット

```markdown
## レビュー結果

### 要約
[全体的な評価を1-2文で]

### 問題点
| 重要度 | 箇所 | 問題 | 改善案 |
|--------|------|------|--------|
| 高/中/低 | ファイル:行 | 問題の説明 | 具体的な改善案 |

### 良い点
[良い点があれば記載]
```

## レビュー観点（クイックリファレンス）

### シンプルさ
- 意図が明確か、ネストが深くないか、YAGNI違反がないか

### 拡張性
- SRP違反がないか、DIが適用されているか、N+1問題がないか

### テスト
- 振る舞いをテストしているか、AAAパターンに従っているか、独立性があるか

### セキュリティ
- 入力検証、機密情報の扱い、権限チェック
